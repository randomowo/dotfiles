#!/bin/bash

# Import the colors
. "${HOME}/.cache/wal/colors.sh"

exclude="(systemd|\
pulseaudio|st|\
dbus-daemon|\
QtWebEngineProc|\
at-spi-bus-laun|\
zsh|\
python|\
grep|\
ps|\
cut|\
sleep|\
gsettings-helpe|\
\(sd-pam\)|\
dmenu|\
xclip|\
sh|\
timer|\
compton|\
picom|\
batlownotify|\
gpg-agent|\
dconf-service|\
xdg-open|\
uniq|\
java|\
fsnotifier64|\
tee|\
soffice.bin|\
pdflatex|\
Web|\
vim|\
dirmngr|\
kitty|\
lreload|\
dwmblocks|\
nmcli|\
curl|\
zathura|\
termite|\
electron|\
sed|\
awk|\
Microsoft.Pytho|\
cat|\
dkill)"

process=$(ps -U randomowo | grep "?" | grep -vE "$exclude" | cut -c 18- | cut -d" " -f2- | \
	uniq -c | grep -oE "[0-9]\ .*" | cut -d" " -f2- | \
	dmenu -nb "$color0" -nf "$color15" -sb "$color1" -sf "$color15" "$@")

[ ! -z $process ] && pkill $process

exit 0
