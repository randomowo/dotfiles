#!/bin/bash

# Import the colors
. "${HOME}/.cache/wal/colors.sh"

exclude="(systemd|\
pulseaudio|st|\
dbus-daemon|\
QtWebEngineProc|\
at-spi-bus-laun|\
zsh|\
python|\
grep|\
ps|\
cut|\
sleep|\
gsettings-helpe|\
\(sd-pam\)|\
dmenu|\
xclip|\
sh|\
timer|\
compton|\
batlownotify|\
gpg-agent|\
dconf-service|\
xdg-open|\
uniq|\
java|\
fsnotifier64|\
tee|\
dkill)"

process=$(ps -U randomowo | grep "?" | grep -vE "$exclude" | cut -c 18- | cut -d" " -f2- | \
	uniq -c | cut -d' ' -f8 | \
	dmenu -nb "$color0" -nf "$color15" -sb "$color1" -sf "$color15" "$@")

[ ! -z $process ] && pkill $process

exit 0
